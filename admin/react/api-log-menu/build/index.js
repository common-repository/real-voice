(()=>{"use strict";const e=window.React,t=wp.element.useMemo,a="...",r=(e,t)=>{let a=t-e+1;return Array.from({length:a},((t,a)=>a+e))};var n;function l(){return l=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var r in a)({}).hasOwnProperty.call(a,r)&&(e[r]=a[r])}return e},l.apply(null,arguments)}var i,c=function(t){return e.createElement("svg",l({width:24,height:24,fill:"none",xmlns:"http://www.w3.org/2000/svg"},t),n||(n=e.createElement("path",{d:"m18 17-5-5 5-5m-7 10-5-5 5-5",stroke:"#000",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"})))};function o(){return o=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var r in a)({}).hasOwnProperty.call(a,r)&&(e[r]=a[r])}return e},o.apply(null,arguments)}var s,d=function(t){return e.createElement("svg",o({width:24,height:24,fill:"none",xmlns:"http://www.w3.org/2000/svg"},t),i||(i=e.createElement("path",{d:"m15 18-6-6 6-6",stroke:"#0783BE",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"})))};function m(){return m=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var r in a)({}).hasOwnProperty.call(a,r)&&(e[r]=a[r])}return e},m.apply(null,arguments)}var u,g=function(t){return e.createElement("svg",m({width:24,height:24,fill:"none",xmlns:"http://www.w3.org/2000/svg"},t),s||(s=e.createElement("path",{d:"m9 18 6-6-6-6",stroke:"#0783BE",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"})))};function v(){return v=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var r in a)({}).hasOwnProperty.call(a,r)&&(e[r]=a[r])}return e},v.apply(null,arguments)}var E=function(t){return e.createElement("svg",v({width:24,height:24,fill:"none",xmlns:"http://www.w3.org/2000/svg"},t),u||(u=e.createElement("path",{d:"m6 17 5-5-5-5m7 10 5-5-5-5",stroke:"#000",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"})))};const h=n=>{const{onPageChange:l,totalCount:i,siblingCount:o=1,currentPage:s,pageSize:m}=n,u=(({totalCount:e,pageSize:n,siblingCount:l=1,currentPage:i})=>t((()=>{const t=Math.ceil(e/n);if(l+5>=t)return r(1,t);const c=Math.max(i-l,1),o=Math.min(i+l,t),s=c>2,d=o<t-2,m=t;if(!s&&d)return[...r(1,3+2*l),a,t];if(s&&!d){let e=r(t-(3+2*l)+1,t);return[1,a,...e]}if(s&&d){let e=r(c,o);return[1,a,...e,a,m]}}),[e,n,l,i]))({currentPage:s,totalCount:i,siblingCount:o,pageSize:m});if(0===s||u.length<2)return null;let v=u[u.length-1];return(0,e.createElement)("ul",{className:"pagination-container"},(0,e.createElement)("li",{className:"pagination-item "+(1===s?"disabled":""),onClick:()=>{l(1)},key:-2},(0,e.createElement)(c,null)),(0,e.createElement)("li",{className:"pagination-item "+(1===s?"disabled":""),onClick:()=>{1!==s&&l(s-1)},key:-1},(0,e.createElement)(d,null)),u.map((t=>t===a?(0,e.createElement)("li",{className:"pagination-item dots",key:crypto.randomUUID()},"â€¦"):(0,e.createElement)("li",{key:t,className:"pagination-item "+(t===s?"selected":""),onClick:()=>l(t)},t))),(0,e.createElement)("li",{className:"pagination-item "+(s===v?"disabled":""),onClick:()=>{s!==v&&l(s+1)},key:v+1},(0,e.createElement)(g,null)),(0,e.createElement)("li",{className:"pagination-item "+(s===v?"disabled":""),onClick:()=>{l(v)},key:v+2},(0,e.createElement)(E,null)))},p=wp.element.useState,D=wp.element.useMemo,{__}=wp.i18n,k=t=>{const[a,r]=p(1),n=D((()=>{const e=10*(a-1),r=e+10;return t.data.slice(e,r)}),[a,t.data]);function l(e){return t.formData.sortingColumn===e?t.formData.sortingOrder:""}return(0,e.createElement)("div",{className:"daextrevo-data-table-container"},(0,e.createElement)("table",{className:"daextrevo-react-table__daextrevo-data-table daextrevo-react-table__daextrevo-data-table-api-log-menu"},(0,e.createElement)("thead",null,(0,e.createElement)("tr",null,(0,e.createElement)("th",null,(0,e.createElement)("button",{className:"daextrevo-react-table__daextrevo-sorting-button",onClick:t.handleSortingChanges,value:"request_id","data-icon":l("request_id")},__("ID","real-voice"))),(0,e.createElement)("th",null,(0,e.createElement)("button",{className:"daextrevo-react-table__daextrevo-sorting-button",onClick:t.handleSortingChanges,value:"request_date","data-icon":l("post_title")},__("Timestamp","real-voice"))),(0,e.createElement)("th",null,(0,e.createElement)("button",{className:"daextrevo-react-table__daextrevo-sorting-button",onClick:t.handleSortingChanges,value:"converter","data-icon":l("value")},__("API Name","real-voice"))),(0,e.createElement)("th",null,(0,e.createElement)("button",{className:"daextrevo-react-table__daextrevo-sorting-button",onClick:t.handleSortingChanges,value:"characters","data-icon":l("description")},__("Characters","real-voice"))),(0,e.createElement)("th",null,(0,e.createElement)("button",{className:"daextrevo-react-table__daextrevo-sorting-button",onClick:t.handleSortingChanges,value:"error","data-icon":l("ip_address")},__("Status","real-voice"))))),(0,e.createElement)("tbody",null,n.map((t=>(0,e.createElement)("tr",{key:t.request_id},(0,e.createElement)("td",null,t.request_id),(0,e.createElement)("td",null,(0,e.createElement)("div",{className:"daextrevo-react-table__post-cell-container"},t.request_date)),(0,e.createElement)("td",null,(0,e.createElement)("div",{className:"daextrevo-react-table__post-cell-container"},t.converter)),(0,e.createElement)("td",null,t.characters),(0,e.createElement)("td",null,(0,e.createElement)("div",{className:"daextrevo-react-table__post-cell-container"},1===parseInt(t.error,10)?__("Error","real-voice")+": "+t.error_message:__("Success","real-voice")))))))),0===t.data.length&&(0,e.createElement)("div",{className:"daextrevo-no-data-found"},__("We couldn't find any results matching your filters. Try adjusting your criteria.","real-voice")),t.data.length>0&&(0,e.createElement)("div",{className:"daextrevo-react-table__pagination-container"},(0,e.createElement)("div",{className:"daext-displaying-num"},t.data.length+" items"),(0,e.createElement)(h,{className:"pagination-bar",currentPage:a,totalCount:t.data.length,pageSize:10,onPageChange:e=>r(e)})))},f=t=>(0,e.createElement)("div",{className:"loading-screen"},(0,e.createElement)("div",{className:"loading-screen__wrapper"},(0,e.createElement)("div",{className:"loading-screen__content"},(0,e.createElement)("div",{className:"loading-screen__spinner-container"},(0,e.createElement)("div",{className:"loading-screen__spinner"})),(0,e.createElement)("div",{className:"loading-screen__text"},void 0!==t.dataUpdateRequired&&t.dataUpdateRequired?t.generatingDataMessage:t.loadingDataMessage)))),{TextControl:_,DatePicker:b}=wp.components,N=wp.element.useEffect,S=wp.element.useRef,x=t=>{const a=S(null),r=e=>{console.log(e.target),a.current&&!a.current.contains(e.target)&&t.setDatePickerState(!1),!0===e.target.classList.contains("daextrevo-datepicker-trigger")&&t.setDatePickerState(!0)};return N((()=>(t.datePickerState?document.addEventListener("mouseup",r):document.removeEventListener("mouseup",r),()=>{document.removeEventListener("mouseup",r)})),[t.datePickerState]),(0,e.createElement)("div",{className:"daextrevo-datepicker-container"},(0,e.createElement)("button",{className:"daextrevo-datepicker-trigger","data-checked":2===t.formData.feedbackValueFilter?"true":"false",onClick:()=>t.toggleDatePickerState()},t.initialDateFormatted+" - "+t.finalDateFormatted),t.datePickerState&&(0,e.createElement)("div",{ref:a,className:"daextrevo-datepicker-selection-container"},(0,e.createElement)("div",{className:"daextrevo-datepicker-date-input-fields"},(0,e.createElement)(_,{className:t.datePickerInitialDateState?"daextrevo-datepicker-selected":"",value:t.initialDateFormattedForInputField,onFocus:()=>{t.setDatePickerInitialDateState(!0),t.setDatePickerFinalDateState(!1)}}),(0,e.createElement)(_,{className:t.datePickerFinalDateState?"daextrevo-datepicker-selected":"",value:t.finalDateFormattedForInputField,onFocus:()=>{t.setDatePickerInitialDateState(!1),t.setDatePickerFinalDateState(!0)}})),t.datePickerInitialDateState&&(0,e.createElement)(b,{currentDate:t.formData.initialDate,onChange:e=>{t.setFormData({...t.formData,initialDate:e})}}),t.datePickerFinalDateState&&(0,e.createElement)(b,{currentDate:t.formData.finalDate,onChange:e=>{t.setFormData({...t.formData,finalDate:e})}})))},w=wp.element.useState,y=wp.element.useEffect,{__:C}=wp.i18n,{render:I}=wp.element,{createRoot:P}=wp.element,M=document.getElementById("react-root"),F=(0,e.createElement)((()=>{const[t,a]=w({converter:0,searchString:"",searchStringChanged:!1,sortingColumn:"request_id",sortingOrder:"desc",initialDate:window.DAEXTREVO_PARAMETERS.initial_date,finalDate:window.DAEXTREVO_PARAMETERS.final_date}),[r,n]=w(""),[l,i]=w(""),[c,o]=w(""),[s,d]=w(""),[m,u]=w(!1),[g,v]=w(!0),[E,h]=w(!1),[p,D]=w(!0),[_,b]=w(!1),[N,S]=w([]),[I,P]=w({totalRequests:0,totalCharacters:0,requestsPerDay:0});y((()=>{D(!0),wp.apiFetch({path:"/real-voice/v1/requests",method:"POST",data:{converter:t.converter,search_string:t.searchString,sorting_column:t.sortingColumn,sorting_order:t.sortingOrder,initial_date:t.initialDate,final_date:t.finalDate,data_update_required:_}}).then((e=>{S(e.table),P({totalRequests:e.statistics.total_requests,totalCharacters:e.statistics.total_characters,requestsPerDay:e.statistics.requests_per_day}),_&&(b(!1),a({converter:0,searchString:"",searchStringChanged:!1,sortingColumn:"request_id",sortingOrder:"desc",initialDate:window.DAEXTREVO_PARAMETERS.initial_date,finalDate:window.DAEXTREVO_PARAMETERS.final_date})),D(!1)})).catch((e=>{D(!1),S([]),P({totalRequests:0,totalCharacters:0,requestsPerDay:0}),wp.apiFetch({path:"/daext-helpful/v1/options",method:"POST",data:{daextrevo_limit_displayed_feedback:1e4,daextrevo_memory_limit_value:"512",daextrevo_set_memory_limit:"0"}}).then((e=>{}))}))}),[t.converter,t.searchStringChanged,t.sortingColumn,t.sortingOrder,t.initialDate,t.finalDate,_]);const M=e=>new Date(e).toLocaleDateString("en-US",{month:"short",day:"numeric",year:"numeric"});y((()=>{const e=M(t.initialDate);n(e)}),[t.initialDate]),y((()=>{const e=M(t.finalDate);i(e)}),[t.finalDate]);const F=e=>{const t=new Date(e);return`${String(t.getMonth()+1).padStart(2,"0")} / ${String(t.getDate()).padStart(2,"0")} / ${t.getFullYear()}`};return y((()=>{const e=F(t.initialDate);o(e)}),[t.initialDate]),y((()=>{const e=F(t.finalDate);d(e)}),[t.finalDate]),(0,e.createElement)(e.Fragment,null,(0,e.createElement)(React.StrictMode,null,p?(0,e.createElement)(f,{loadingDataMessage:C("Loading data...","real-voice"),generatingDataMessage:C("Data is being generated. For large sites, this process may take several minutes. Please wait...","real-voice"),dataUpdateRequired:_}):(0,e.createElement)(e.Fragment,null,(0,e.createElement)(e.Fragment,null,(0,e.createElement)("div",{className:"daextrevo-admin-body"},(0,e.createElement)("div",{className:"daextrevo-react-table"},(0,e.createElement)("div",{className:"daextrevo-react-table-header"},(0,e.createElement)("div",{className:"statistics"},(0,e.createElement)("div",{className:"statistic-label"},C("Total Requests","real-voice"),":"),(0,e.createElement)("div",{className:"statistic-value"},I.totalRequests),(0,e.createElement)("div",{className:"statistic-label"},C("Total Characters","real-voice"),":"),(0,e.createElement)("div",{className:"statistic-value"},I.totalCharacters),(0,e.createElement)("div",{className:"statistic-label"},C("Requests per Day","real-voice"),":"),(0,e.createElement)("div",{className:"statistic-value"},I.requestsPerDay)),(0,e.createElement)("div",{className:"tools-actions"},(0,e.createElement)("button",{onClick:e=>{b((e=>!e))}},(0,e.createElement)("img",{src:"data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMjQiIGhlaWdodD0iMjQiIHZpZXdCb3g9IjAgMCAyNCAyNCIgZmlsbD0ibm9uZSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj4KPHBhdGggZD0iTTIyIDEwQzIyIDEwIDE5Ljk5NSA3LjI2ODIyIDE4LjM2NjIgNS42MzgyNEMxNi43MzczIDQuMDA4MjcgMTQuNDg2NCAzIDEyIDNDNy4wMjk0NCAzIDMgNy4wMjk0NCAzIDEyQzMgMTYuOTcwNiA3LjAyOTQ0IDIxIDEyIDIxQzE2LjEwMzEgMjEgMTkuNTY0OSAxOC4yNTQzIDIwLjY0ODIgMTQuNU0yMiAxMFY0TTIyIDEwSDE2IiBzdHJva2U9IiM0NzU0NjciIHN0cm9rZS13aWR0aD0iMiIgc3Ryb2tlLWxpbmVjYXA9InJvdW5kIiBzdHJva2UtbGluZWpvaW49InJvdW5kIi8+Cjwvc3ZnPgo=",className:"button-icon"}),C("Update metrics","real-voice")))),(0,e.createElement)("div",{className:"daextrevo-react-table__daextrevo-filters daextrevo-react-table__daextrevo-filters-api-log-menu"},(0,e.createElement)("div",{className:"daextrevo-react-table__daextrevo-filters-left-section"},(0,e.createElement)("div",{className:"daextrevo-pills"},(0,e.createElement)("button",{className:"daextrevo-pill","data-checked":0===t.converter?"true":"false",onClick:()=>a({...t,converter:0})},C("All","real-voice")),(0,e.createElement)("button",{className:"daextrevo-pill","data-checked":1===t.converter?"true":"false",onClick:()=>a({...t,converter:1})},C("Google TTS","real-voice")),(0,e.createElement)("button",{className:"daextrevo-pill","data-checked":2===t.converter?"true":"false",onClick:()=>a({...t,converter:2})},C("Azure TTS","real-voice"))),(0,e.createElement)(x,{formData:t,setFormData:a,initialDateFormatted:r,finalDateFormatted:l,initialDateFormattedForInputField:c,finalDateFormattedForInputField:s,datePickerState:m,setDatePickerState:u,datePickerInitialDateState:g,setDatePickerInitialDateState:v,datePickerFinalDateState:E,setDatePickerFinalDateState:h,toggleDatePickerState:function(){u((e=>!e))}})),(0,e.createElement)("div",{className:"daextrevo-search-container"},(0,e.createElement)("input",{onKeyUp:function(e){"Enter"===e.key&&(e.preventDefault(),document.getElementById("daextrevo-search-button").click())},type:"text",placeholder:C("Filter by ID","real-voice"),value:t.searchString,onChange:e=>a({...t,searchString:e.target.value})}),(0,e.createElement)("input",{id:"daextrevo-search-button",className:"daextrevo-btn daextrevo-btn-secondary",type:"submit",value:C("Search","real-voice"),onClick:()=>a({...t,searchStringChanged:!t.searchStringChanged})}))),(0,e.createElement)(k,{data:N,handleSortingChanges:function(e){let r=t.sortingOrder;t.sortingColumn===e.target.value&&(r="asc"===t.sortingOrder?"desc":"asc"),a({...t,sortingColumn:e.target.value,sortingOrder:r})},formData:t})))))))}),null);M&&(P?P(M).render(F):I(F,M))})();