function audioBufferToWav(e,t){var a=e.numberOfChannels,n=e.sampleRate,t=(t=t||{}).float32?3:1,r=3==t?32:16,e=2===a?interleave(e.getChannelData(0),e.getChannelData(1)):e.getChannelData(0);return encodeWAV(e,t,n,a,r)}function encodeWAV(e,t,a,n,r){var o=r/8,d=n*o,i=new ArrayBuffer(44+e.length*o),l=new DataView(i);return writeString(l,0,"RIFF"),l.setUint32(4,36+e.length*o,!0),writeString(l,8,"WAVE"),writeString(l,12,"fmt "),l.setUint32(16,16,!0),l.setUint16(20,t,!0),l.setUint16(22,n,!0),l.setUint32(24,a,!0),l.setUint32(28,a*d,!0),l.setUint16(32,d,!0),l.setUint16(34,r,!0),writeString(l,36,"data"),l.setUint32(40,e.length*o,!0),(1===t?floatTo16BitPCM:writeFloat32)(l,44,e),i}function interleave(e,t){for(var a=e.length+t.length,n=new Float32Array(a),r=0,o=0;r<a;)n[r++]=e[o],n[r++]=t[o],o++;return n}function writeFloat32(e,t,a){for(var n=0;n<a.length;n++,t+=4)e.setFloat32(t,a[n],!0)}function floatTo16BitPCM(e,t,a){for(var n=0;n<a.length;n++,t+=2){var r=Math.max(-1,Math.min(1,a[n]));e.setInt16(t,r<0?32768*r:32767*r,!0)}}function writeString(e,t,a){for(var n=0;n<a.length;n++)e.setUint8(t+n,a.charCodeAt(n))}function daextrevoMain(){var e=document.getElementById("daextrevo-play-icon");const t=document.getElementById("daextrevo-audio-player-container"),a=document.getElementById("daextrevo-seek-slider");var n=document.getElementById("daextrevo-volume-slider"),r=document.getElementById("daextrevo-mute-icon");const o=document.getElementById("daextrevo-play-circle"),d=document.getElementById("daextrevo-pause-circle"),i=document.getElementById("daextrevo-volume-max"),l=document.getElementById("daextrevo-volume-x");let s="play",u="unmute";if(void 0===e||null==e)return;e.addEventListener("click",()=>{s="play"===s?(v.play(),o.classList.add("daextrevo-display-none"),d.classList.remove("daextrevo-display-none"),requestAnimationFrame(E),"pause"):(v.pause(),o.classList.remove("daextrevo-display-none"),d.classList.add("daextrevo-display-none"),cancelAnimationFrame(h),"play")}),r.addEventListener("click",()=>{u="unmute"===u?(i.classList.add("daextrevo-display-none"),l.classList.remove("daextrevo-display-none"),v.muted=!0,"mute"):(i.classList.remove("daextrevo-display-none"),l.classList.add("daextrevo-display-none"),v.muted=!1,"unmute")});const c=e=>{e===a?t.style.setProperty("--seek-before-width",e.value/e.max*100+"%"):t.style.setProperty("--volume-before-width",e.value/e.max*100+"%")},v=(a.addEventListener("input",e=>{c(e.target)}),n.addEventListener("input",e=>{c(e.target)}),document.querySelector("audio")),m=document.getElementById("daextrevo-duration"),f=document.getElementById("daextrevo-current-time"),y=document.getElementById("daextrevo-volume-output");let h=null;const g=e=>{var t=Math.floor(e/60),e=Math.floor(e%60);return t+":"+(e<10?"0"+e:""+e)},p=()=>{m.textContent=g(v.duration)},x=()=>{a.max=Math.floor(v.duration)},w=()=>{var e;0<v.buffered.length&&(e=Math.floor(v.buffered.end(v.buffered.length-1)),t.style.setProperty("--buffered-width",e/a.max*100+" % "))},E=()=>{a.value=Math.floor(v.currentTime),f.textContent=g(a.value),t.style.setProperty("--seek-before-width",a.value/a.max*100+" % "),h=requestAnimationFrame(E)};0<v.readyState?(p(),x(),w()):v.addEventListener("loadedmetadata",()=>{p(),x(),w()}),v.addEventListener("progress",w),v.addEventListener("ended",()=>{o.classList.remove("daextrevo-display-none"),d.classList.add("daextrevo-display-none"),s="play"}),a.addEventListener("input",()=>{f.textContent=g(a.value),v.paused||cancelAnimationFrame(h)}),a.addEventListener("change",()=>{v.currentTime=a.value,v.paused||requestAnimationFrame(E)}),n.addEventListener("input",e=>{e=e.target.value;y.textContent=e,v.volume=e/100})}async function fetchAudio(e){var t=await fetch(e);if(t.ok)return t.arrayBuffer();throw new Error("Failed to fetch "+e)}async function concatenateAudioFiles(e){let t=null;if(1<e.length){const o=new(window.AudioContext||window.webkitAudioContext);var n=await Promise.all(e.map(async e=>{e=await fetchAudio(e);return o.decodeAudioData(e)}));const d=n[0].sampleRate;if(!n.every(e=>e.sampleRate===d))throw new Error("Audio files have different sample rates");var r=n.reduce((e,t)=>e+t.length,0);const i=o.createBuffer(2,r,d);let a=0;n.forEach(t=>{for(let e=0;e<t.numberOfChannels;e++)i.getChannelData(e).set(t.getChannelData(e),a);a+=t.length});r=audioBufferToWav(i),n=new Blob([r],{type:"audio/wav"});t=URL.createObjectURL(n)}else t=e[0];document.querySelector("#daextrevo-audio-player-container > audio").src=t,daextrevoMain()}window.DAEXTREVO_PHPDATA.audioFileUrl&&Array.isArray(window.DAEXTREVO_PHPDATA.audioFileUrl)&&0<window.DAEXTREVO_PHPDATA.audioFileUrl.length&&concatenateAudioFiles(window.DAEXTREVO_PHPDATA.audioFileUrl);