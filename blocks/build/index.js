!function(){"use strict";var e=window.wp.element;const{Button:t}=wp.components,{dispatch:i,select:a}=wp.data,{PluginDocumentSettingPanel:o}=wp.editPost,{Component:s}=wp.element,{__:__}=wp.i18n,{dateI18n:l}=wp.date,{registerPlugin:r}=wp.plugins;r("daextrevo-audio-file",{icon:!1,render:class extends s{constructor(e){super(...arguments),this.state={audioFileCreationDate:"",dismissibleNoticeMessage:"",dismissibleNoticeEnabled:!1,dismissibleNoticeColor:"green"}}render(){const s=a("core/editor").getEditedPostAttribute("meta")._daextrevo_audio_file_creation_date;return(0,e.createElement)(o,{name:"real-voice",title:__("Audio File","real-voice")},"speechsyntesis-api"!==window.DAEXTREVO_PARAMETERS.textToSpeechConverter&&(0,e.createElement)("div",{className:"daextrevo-container"},""===s&&(0,e.createElement)("div",{className:"daextrevo-meta-message"},(0,e.createElement)("p",null,__('Click "Generate file" to create an audio file from the configured content.',"real-voice"))),""!==s&&(0,e.createElement)("div",{className:"daextrevo-meta-container"},(0,e.createElement)("div",{className:"components-panel__row edit-post-post-visibility daextrevo-row"},(0,e.createElement)("span",null,__("Timestamp","real-voice")),(0,e.createElement)("div",{className:"components-dropdown daextrevo-column-2"},l("F j, Y g:i a \\U\\T\\C",1e3*parseInt(s,10))))),(0,e.createElement)("div",{className:"daextrevo-buttons-container"},(0,e.createElement)(t,{variant:"secondary",className:"editor-post-trash daextrevo-generate-file-button",onClick:()=>{if("auto-draft"===a("core/editor").getEditedPostAttribute("status")){const e=__("Please save the post before creating the audio file. You are not allowed to generate a new audio file for an auto-draft post.","real-voice"),t="orange";return this.setState({dismissibleNoticeEnabled:!0,dismissibleNoticeMessage:e,dismissibleNoticeColor:t}),void setTimeout((()=>{this.setState({dismissibleNoticeEnabled:!1})}),3e3)}const e=parseInt(document.getElementById("post_ID").value,10);wp.apiFetch({path:"/real-voice/v1/create-audio-file",method:"POST",data:{id:e,nonce:window.DAEXTREVO_PARAMETERS.create_audio_file_nonce}}).then((e=>{let t,a;if(e.error)t=__("The text-to-speech converter is unable to generate the audio file. Message","real-voice")+': "'+e.message+'"',a="orange";else switch(e.audio_file_url=String(e.audio_file_url),e.audio_file_creation_date=String(e.audio_file_creation_date),i("core/editor").editPost({meta:{_daextrevo_audio_file_url:e.audio_file_url}}),i("core/editor").editPost({meta:{_daextrevo_audio_file_creation_date:e.audio_file_creation_date}}),this.setState({audioFileCreationDate:e.audio_file_creation_date}),parseInt(e.audio_file_status,10)){case 0:t=__("New audio file successfully created.","real-voice"),a="green";break;case 1:t=__("The audio file has been successfully updated.","real-voice"),a="green";break;case 2:t=__("The existing audio file is already up to date.","real-voice"),a="orange"}this.setState({dismissibleNoticeEnabled:!0,dismissibleNoticeMessage:t,dismissibleNoticeColor:a}),setTimeout((()=>{this.setState({dismissibleNoticeEnabled:!1})}),3e3)}))}},__("Generate file","real-voice")),""!==s&&(0,e.createElement)(t,{variant:"secondary",className:"editor-post-trash is-destructive daextrevo-delete-file-button",onClick:()=>{const e=parseInt(document.getElementById("post_ID").value,10);wp.apiFetch({path:"/real-voice/v1/delete-audio-file",method:"POST",data:{id:e,nonce:window.DAEXTREVO_PARAMETERS.delete_audio_file_nonce}}).then((e=>{i("core/editor").editPost({meta:{_daextrevo_audio_file_url:""}}),i("core/editor").editPost({meta:{_daextrevo_audio_file_creation_date:""}}),this.setState({audioFileCreationDate:""}),this.setState({dismissibleNoticeEnabled:!0,dismissibleNoticeMessage:__("The audio file has been successfully deleted.","real-voice"),dismissibleNoticeColor:"green"}),setTimeout((()=>{this.setState({dismissibleNoticeEnabled:!1})}),3e3)}))}},__("Delete file","real-voice"))),this.state.dismissibleNoticeEnabled&&(0,e.createElement)("div",{id:"daextrevo-dismissible-notice",className:"daextrevo-dismissible-notice-color-"+this.state.dismissibleNoticeColor},this.state.dismissibleNoticeMessage)),"speechsyntesis-api"===window.DAEXTREVO_PARAMETERS.textToSpeechConverter&&(0,e.createElement)("div",null,(0,e.createElement)("p",null,__("The selected text-to-speech converter is SpeechSynthesis (Web Speech API). The speech is generated on the device of the user.","real-voice"))))}}});const{TextareaControl:n}=wp.components,{SelectControl:d}=wp.components,{dispatch:c,select:u}=wp.data,{PluginDocumentSettingPanel:m}=wp.editPost,{Component:p}=wp.element,{__:_}=wp.i18n,{registerPlugin:v}=wp.plugins;v("daextrevo-text-to-speech",{icon:!1,render:class extends p{constructor(e){super(...arguments),this.state={textareaValue:"",documentType:"text"}}render(){const t=u("core/editor").getEditedPostAttribute("meta"),i=t._daextrevo_text_to_speech,a=t._daextrevo_document_type;return(0,e.createElement)(m,{name:"real-voice",title:_("Text to Speech","real-voice")},(0,e.createElement)(n,{label:_("Document (Text/SSML)","real-voice"),help:_("Enter the text/SSML to synthesize or leave this field empty to use the post content."),value:i,onChange:e=>{c("core/editor").editPost({meta:{_daextrevo_text_to_speech:e}}),this.setState({textareaValue:e})}}),(0,e.createElement)(d,{label:_("Document Type","real-voice"),help:_("Select if you want to provide the document as plain text or in SSML.","real-voice"),value:a,options:[{label:_("Text","real-voice"),value:"text"},{label:_("SSML","real-voice"),value:"ssml"}],onChange:e=>{c("core/editor").editPost({meta:{_daextrevo_document_type:e}}),this.setState({documentType:e})}}))}}})}();